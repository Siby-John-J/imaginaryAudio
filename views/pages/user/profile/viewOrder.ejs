
<!DOCTYPE html>
<html>
<head>
  <title>Order View Page</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="/js/inputs/returnProduct.js"></script>
  <style>
    /* Your existing CSS styles here */

    /* Additional custom style for product status */
    .table td.status {
      font-weight: bold;
    }

    .title-and-btn {
      display: flex;
      align-items: row;
      justify-content: space-between;
    }

    .title-and-btn button {
      width: 8em;
      border: none;
      background-color: #848484;
      border-radius: 1em;
      color: white;
    }

    .model {
      border: 1px solid #363636;
      height: 20em;
      width: 29em;
      position: absolute;
      z-index: 1;
      top: 8em;
      left: 27em;
      border-radius: 1em;
      background-color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-evenly;
    }
  </style>
</head>
<body>
  <% let totalprice = 0 %>
  <div class="container mt-4">
    <h1>Order Details</h1>
    <div class="row">
      <div class="col-md-6">
        <h3>Customer Information</h3>
        <p><strong>Name:</strong> <%= address.fname + ' ' + address.lname %></p>
        <p><strong>Email:</strong> <%= address.email %></p>
        <p><strong>Phone:</strong> +91<%= address.ph %></p>
        <p><strong>Coupon:</strong> <%= address.coupon %></p>
      </div>
      <div class="col-md-6">
        <h3>Shipping Address</h3>
        <p><strong>Address:</strong> <%= address.address %></p>
        <p><strong>City:</strong> <%= address.town %></p>
        <p><strong>Status:</strong> <%= address.status %></p>
      </div>
    </div>
    
    <hr>
    
    <div class="title-and-btn">
      <h3>Order items</h3>
      <% if(address.status === 'delivered') { %>
        <button onclick="activate()">Return</button>
      <% } %>
      <a href="/<%= user %>/orders/invoice?id=<%= address.mainid %>">Invoice</a>
    </div>
    <div style="display: none;" class="model">
      <h4>return product</h4>
      <div class="reasons">
        <div class="res">
          <input type="radio" value="wrong product" name="reason" id="" checked>
          <label for="">wrong product</label>
        </div>
        <div class="res">
          <input type="radio" value="wrong product" name="reason" id="">
          <label for="">product damaged</label>
        </div>
        <div class="res">
          <input type="radio" value="wrong product" name="reason" id="">
          <label for="">late delivery</label>
        </div>
        <div class="res">
          <input type="radio" value="wrong product" name="reason" id="">
          <label for="">price drop</label>
        </div>
        <div class="res">
          <input type="radio" value="wrong product" name="reason" id="">
          <label for="">low perfomence</label>
        </div>
      </div>
      <form class="controls" action="/<%= user %>/orders/return_order" method="post">
        <input style="display: none;" name="id" value="<%= address.id %>" type="text">
        <button onclick="deactivate(event)">Cancel</button>
        <button>Send</button>
      </form>
    </div>
    <table class="table">
      <thead>
        <tr>
          <th>Product</th>
          <th>Quantity</th>
          <th>Price</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        <% for(let i of items) { %>
            <tr>
              <td><%= i.name %></td>
              <td><%= i.total %></td>
              <td>$<%= i.price %></td>
              <td>$<%= i.total * i.price %></td>
              <% totalprice += i.total * i.price %>
            </tr>
        <% } %>
      </tbody>
    </table>
    <div class="text-right">
      <p><strong>Subtotal:</strong> $<%= totalprice %></p>
      <p><strong>Tax:</strong> $7</p>
      <p><strong>Total:</strong> $<%= totalprice %></p>
    </div>
  </div>
</body>
</html>
